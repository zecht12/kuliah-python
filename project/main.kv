#:import dp kivy.metrics.dp
#:import sp kivy.metrics.sp

<RegisterScreen>:
    name: "register"
    BoxLayout:
        orientation: "vertical"
        pos_hint: {"center_x": 0.5, "center_y": 0.5}
        size_hint: None, None
        size: dp(300), dp(400)
        padding: dp(20)
        spacing: dp(10)
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size

        Label:
            text: "Daftar Pengguna Baru"
            font_size: sp(28)
            bold: True
            halign: "center"
            valign: "middle"
            color: 0, 0, 0, 1
            size_hint_y: None
            height: self.texture_size[1]

        TextInput:
            id: username_input
            hint_text: "Masukkan nama pengguna"
            font_size: sp(18)
            multiline: False
            size_hint: 1, None
            height: dp(50)

        TextInput:
            id: password_input
            hint_text: "Masukkan kata sandi"
            font_size: sp(18)
            multiline: False
            password: True
            size_hint: 1, None
            height: dp(50)

        Button:
            text: "Daftar"
            background_color: (0.09, 0.76, 0.57, 1)
            font_size: sp(18)
            size_hint: 1, None
            height: dp(50)
            on_release:
                root.register()

        BoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: dp(40)

            Label:
                text: "Sudah punya akun?"
                font_size: sp(16)
                color: 0, 0, 0.7, 1

            Button:
                text: "Masuk"
                font_size: sp(16)
                color: 0, 0, 0.7, 1
                size_hint_x: None
                width: dp(80)
                background_color: (1, 1, 1, 0)
                on_release: app.root.current = "login"

<LoginScreen>:
    name: "login"
    BoxLayout:
        orientation: "vertical"
        pos_hint: {"center_x": 0.5, "center_y": 0.5}
        size_hint: None, None
        size: dp(300), dp(400)
        padding: dp(20)
        spacing: dp(10)
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size

        Label:
            text: "Masuk"
            font_size: sp(28)
            bold: True
            halign: "center"
            valign: "middle"
            color: 0, 0, 0, 1
            size_hint_y: None
            height: self.texture_size[1]

        TextInput:
            id: username_input
            hint_text: "Masukkan nama pengguna"
            font_size: sp(18)
            multiline: False
            size_hint: 1, None
            height: dp(50)

        TextInput:
            id: password_input
            hint_text: "Masukkan kata sandi"
            font_size: sp(18)
            multiline: False
            password: True
            size_hint: 1, None
            height: dp(50)

        Button:
            text: "Masuk"
            background_color: (0.09, 0.76, 0.57, 1)
            font_size: sp(18)
            size_hint: 1, None
            height: dp(50)
            on_release:
                root.login()

        BoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: dp(40)

            Label:
                text: "Belum punya akun?"
                font_size: sp(16)
                color: 0, 0, 0.7, 1

            Button:
                text: "Daftar"
                font_size: sp(16)
                color: 0, 0, 0.7, 1
                size_hint_x: None
                width: dp(80)
                background_color: (1, 1, 1, 0)
                on_release: app.root.current = "register"

<HomePage>:
    name: "homepage"
    BoxLayout:
        orientation: "vertical"
        padding: dp(20)
        spacing: dp(10)
        canvas.before:
            Color:
                rgba: 0.87, 0.87, 0.87, 1
            Rectangle:
                pos: self.pos
                size: self.size

        BoxLayout:
            id: user_info_box
            orientation: "horizontal"
            size_hint_y: None
            height: dp(80)
            spacing: dp(10)
            padding: [dp(10), dp(10)]
            canvas.before:
                Color:
                    rgba: 0.09, 0.76, 0.57, 1
                Rectangle:
                    pos: self.pos
                    size: self.size

            Label:
                id: name_label
                text: "NAMA ANAK"
                font_size: sp(24)
                color: 1, 1, 1, 1
                bold: True
                size_hint_x: 0.8
                valign: "middle"
                halign: "left"
                text_size: self.size

            BoxLayout:
                orientation: "horizontal"
                spacing: dp(5)
                size_hint_x: 0.2
                pos_hint: {"center_y": 0.5}

                Image:
                    source: "assets/crown_icons.png"
                    size_hint: None, None
                    size: dp(30), dp(30)
                    pos_hint: {"center_y": 0.5}

                Label:
                    id: score_label
                    text: "0"
                    font_size: sp(18)
                    color: 1, 1, 1, 1
                    valign: "middle"
                    halign: "center"
                    text_size: self.size

        GridLayout:
            cols: 2
            spacing: dp(10)
            padding: dp(10)
            size_hint: None, None
            size: self.minimum_size
            pos_hint: {"center_x": 0.5, "center_y": 0.5}

            BoxLayout:
                id: level_1_box
                orientation: "vertical"
                size_hint: None, None
                size: dp(160), dp(200)
                canvas.before:
                    Color:
                        rgba: 0, 0.8, 0.6, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(10)]

                BoxLayout:
                    padding: dp(10)
                    size_hint: None, None
                    size: dp(120), dp(120)
                    pos_hint: {"center_x": 0.5}

                    Image:
                        source: "assets/level-1.png"
                        size_hint: None, None
                        size: dp(100), dp(100)
                        pos_hint: {"center_x": 0.5}

                Label:
                    text: "Level 1 Penjumlahan"
                    font_size: sp(16)
                    color: 1, 1, 1, 1
                    halign: "center"

                BoxLayout:
                    padding: [dp(10), dp(5)]
                    size_hint: 1, None
                    height: self.minimum_height
                    pos_hint: {"center_x": 0.5}
                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(5)]

                    Label:
                        text: "My Bestscore : 100"
                        font_size: sp(14)
                        color: 0, 0, 0, 1
                        halign: "center"
                        valign: "middle"
                        size_hint: None, None
                        size: self.texture_size
                        text_size: None, None

            BoxLayout:
                id: level_2_box
                orientation: "vertical"
                size_hint: None, None
                size: dp(160), dp(200)
                canvas.before:
                    Color:
                        rgba: 0, 0.8, 0.6, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(10)]

                BoxLayout:
                    padding: dp(10)
                    size_hint: None, None
                    size: dp(120), dp(120)
                    pos_hint: {"center_x": 0.5}

                    Image:
                        source: "assets/level-2.png"
                        size_hint: None, None
                        size: dp(100), dp(100)
                        pos_hint: {"center_x": 0.5}

                Label:
                    text: "Level 2 Pengurangan"
                    font_size: sp(16)
                    color: 1, 1, 1, 1
                    halign: "center"

                BoxLayout:
                    padding: [dp(10), dp(5)]
                    size_hint: 1, None
                    height: self.minimum_height
                    pos_hint: {"center_x": 0.5}
                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(5)]

                    Label:
                        text: "My Bestscore : 100"
                        font_size: sp(14)
                        color: 0, 0, 0, 1
                        halign: "center"
                        valign: "middle"
                        size_hint: None, None
                        size: self.texture_size
                        text_size: None, None

            BoxLayout:
                id: level_3_box
                orientation: "vertical"
                size_hint: None, None
                size: dp(160), dp(200)
                canvas.before:
                    Color:
                        rgba: 0, 0.8, 0.6, 1
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(10)]

                BoxLayout:
                    padding: dp(10)
                    size_hint: None, None
                    size: dp(120), dp(120)
                    pos_hint: {"center_x": 0.5}

                    Image:
                        source: "assets/level-3.png"
                        size_hint: None, None
                        size: dp(100), dp(100)
                        pos_hint: {"center_x": 0.5}

                Label:
                    text: "Level 3 Perkalian"
                    font_size: sp(16)
                    color: 1, 1, 1, 1
                    halign: "center"

                BoxLayout:
                    padding: [dp(10), dp(5)]
                    size_hint: 1, None
                    height: self.minimum_height
                    pos_hint: {"center_x": 0.5}
                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(5)]

                    Label:
                        text: "My Bestscore : 100"
                        font_size: sp(14)
                        color: 0, 0, 0, 1
                        halign: "center"
                        valign: "middle"
                        size_hint: None, None
                        size: self.texture_size
                        text_size: None, None

<ImageButton>:
    allow_stretch: True
    keep_ratio: False

<QuizPenjumlahanScreen>:
    name: "quiz_penjumlahan"
    BoxLayout:
        orientation: "vertical"
        padding: dp(20)
        spacing: dp(10)
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size

        ImageButton:
            source: "assets/back.png"
            size_hint: None, None
            size: dp(30), dp(30)
            on_release: app.root.current = "homepage"

        BoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: dp(50)

            BoxLayout:
                orientation: "horizontal"
                size_hint_x: 0.5
                spacing: dp(5)

                Image:
                    source: "assets/stopwatch.png"
                    size_hint: None, None
                    size: dp(30), dp(30)

                Label:
                    id: timer_label
                    text: "0:10"
                    font_size: sp(20)
                    halign: "left"
                    valign: "middle"
                    color: (0, 0, 0, 1)
                    text_size: self.size

            BoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: dp(50)
                padding: dp(0), dp(0), dp(10), dp(0)
                spacing: dp(5)

                Widget:
                    size_hint_x: 1

                Image:
                    source: "assets/crown_icons.png"
                    size_hint: None, None
                    size: dp(30), dp(30)
                    allow_stretch: True
                    keep_ratio: True

                Label:
                    id: score_label
                    text: "0"
                    font_size: sp(20)
                    size_hint: None, None
                    size: self.texture_size
                    valign: "middle"
                    halign: "left"
                    color: (0, 0, 0, 1)

        ProgressBar:
            id: progress_bar
            size_hint_y: None
            height: dp(20)
            max: 100
            value: 0

        Label:
            id: question_label
            text: "8 + 6 = ?"
            font_size: sp(28)
            halign: "center"
            valign: "middle"
            color: (0, 0, 0, 1)
            text_size: self.size

        GridLayout:
            cols: 2
            spacing: dp(10)
            size_hint_y: None
            height: dp(200)

            Button:
                id: option_1
                text: "56"
                font_size: sp(24)
                background_normal: ""
                background_color: (0, 0.8, 0.6, 1)
                on_release: root.check_answer(self.text)

            Button:
                id: option_2
                text: "49"
                font_size: sp(24)
                background_normal: ""
                background_color: (0, 0.8, 0.6, 1)
                on_release: root.check_answer(self.text)

            Button:
                id: option_3
                text: "28"
                font_size: sp(24)
                background_normal: ""
                background_color: (0, 0.8, 0.6, 1)
                on_release: root.check_answer(self.text)

            Button:
                id: option_4
                text: "36"
                font_size: sp(24)
                background_normal: ""
                background_color: (0, 0.8, 0.6, 1)
                on_release: root.check_answer(self.text)

<QuizPenguranganScreen>:
    name: "quiz_pengurangan"
    BoxLayout:
        orientation: "vertical"
        padding: dp(20)
        spacing: dp(10)
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size

        ImageButton:
            source: "assets/back.png"
            size_hint: None, None
            size: dp(30), dp(30)
            on_release: app.root.current = "homepage"

        BoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: dp(50)

            BoxLayout:
                orientation: "horizontal"
                size_hint_x: 0.5
                spacing: dp(5)

                Image:
                    source: "assets/stopwatch.png"
                    size_hint: None, None
                    size: dp(30), dp(30)

                Label:
                    id: timer_label
                    text: "0:10"
                    font_size: sp(20)
                    halign: "left"
                    valign: "middle"
                    color: (0, 0, 0, 1)
                    text_size: self.size

            BoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: dp(50)
                padding: dp(0), dp(0), dp(10), dp(0)
                spacing: dp(5)

                Widget:
                    size_hint_x: 1

                Image:
                    source: "assets/crown_icons.png"
                    size_hint: None, None
                    size: dp(30), dp(30)
                    allow_stretch: True
                    keep_ratio: True

                Label:
                    id: score_label
                    text: "0"
                    font_size: sp(20)
                    size_hint: None, None
                    size: self.texture_size
                    valign: "middle"
                    halign: "left"
                    color: (0, 0, 0, 1)

        ProgressBar:
            id: progress_bar
            size_hint_y: None
            height: dp(20)
            max: 100
            value: 0

        Label:
            id: question_label
            text: "12 - 5 = ?"
            font_size: sp(28)
            halign: "center"
            valign: "middle"
            color: (0, 0, 0, 1)
            text_size: self.size

        GridLayout:
            cols: 2
            spacing: dp(10)
            size_hint_y: None
            height: dp(200)

            Button:
                id: option_1
                text: "7"
                font_size: sp(24)
                background_normal: ""
                background_color: (0, 0.8, 0.6, 1)
                on_release: root.check_answer(self.text)

            Button:
                id: option_2
                text: "5"
                font_size: sp(24)
                background_normal: ""
                background_color: (0, 0.8, 0.6, 1)
                on_release: root.check_answer(self.text)

            Button:
                id: option_3
                text: "6"
                font_size: sp(24)
                background_normal: ""
                background_color: (0, 0.8, 0.6, 1)
                on_release: root.check_answer(self.text)

            Button:
                id: option_4
                text: "8"
                font_size: sp(24)
                background_normal: ""
                background_color: (0, 0.8, 0.6, 1)
                on_release: root.check_answer(self.text)

<QuizPerkalianScreen>:
    name: "quiz_perkalian"
    BoxLayout:
        orientation: "vertical"
        padding: dp(20)
        spacing: dp(10)
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size

        ImageButton:
            source: "assets/back.png"
            size_hint: None, None
            size: dp(30), dp(30)
            on_release: app.root.current = "homepage"

        BoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: dp(50)

            BoxLayout:
                orientation: "horizontal"
                size_hint_x: 0.5
                spacing: dp(5)

                Image:
                    source: "assets/stopwatch.png"
                    size_hint: None, None
                    size: dp(30), dp(30)

                Label:
                    id: timer_label
                    text: "0:10"
                    font_size: sp(20)
                    halign: "left"
                    valign: "middle"
                    color: (0, 0, 0, 1)
                    text_size: self.size

            BoxLayout:
                orientation: "horizontal"
                size_hint_y: None
                height: dp(50)
                padding: dp(0), dp(0), dp(10), dp(0)
                spacing: dp(5)

                Widget:
                    size_hint_x: 1

                Image:
                    source: "assets/crown_icons.png"
                    size_hint: None, None
                    size: dp(30), dp(30)
                    allow_stretch: True
                    keep_ratio: True

                Label:
                    id: score_label
                    text: "0"
                    font_size: sp(20)
                    size_hint: None, None
                    size: self.texture_size
                    valign: "middle"
                    halign: "left"
                    color: (0, 0, 0, 1)

        ProgressBar:
            id: progress_bar
            size_hint_y: None
            height: dp(20)
            max: 100
            value: 0

        Label:
            id: question_label
            text: "3 x 4 = ?"
            font_size: sp(28)
            halign: "center"
            valign: "middle"
            color: (0, 0, 0, 1)
            text_size: self.size

        GridLayout:
            cols: 2
            spacing: dp(10)
            size_hint_y: None
            height: dp(200)

            Button:
                id: option_1
                text: "12"
                font_size: sp(24)
                background_normal: ""
                background_color: (0, 0.8, 0.6, 1)
                on_release: root.check_answer(self.text)

            Button:
                id: option_2
                text: "9"
                font_size: sp(24)
                background_normal: ""
                background_color: (0, 0.8, 0.6, 1)
                on_release: root.check_answer(self.text)

            Button:
                id: option_3
                text: "10"
                font_size: sp(24)
                background_normal: ""
                background_color: (0, 0.8, 0.6, 1)
                on_release: root.check_answer(self.text)

            Button:
                id: option_4
                text: "11"
                font_size: sp(24)
                background_normal: ""
                background_color: (0, 0.8, 0.6, 1)
                on_release: root.check_answer(self.text)